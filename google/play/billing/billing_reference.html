<!DOCTYPE html>





























































































<html>
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">

<meta name="Description" content="This documentation provides technical reference information for using the In-app Billing Version 3 API. The following table lists all of the server response codes that are sent from Google Play to your application. Google Play sends the response code …">
<link rel="shortcut icon" type="image/x-icon" href="../../../favicon.ico" />
<title>In-app Billing Reference | Android Developers</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
  title="roboto">

<link href="../../../assets/css/default.css?v=7" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="../../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../../";
  var metaTags = [];
  var devsite = false;
</script>
<script src="../../../assets/js/docs.js?v=6" type="text/javascript"></script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

</head>

<body class="gc-documentation


google develop" itemscope itemtype="http://schema.org/Article">
<a name="top"></a>

<!-- dialog to prompt lang pref change when loaded from hardcoded URL
<div id="langMessage" style="display:none">
  <div>
    <div class="lang en">
      <p>You requested a page in English, would you like to proceed with this language setting?</p>
    </div>
    <div class="lang es">
      <p>You requested a page in Spanish (Español), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ja">
      <p>You requested a page in Japanese (日本語), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ko">
      <p>You requested a page in Korean (한국어), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ru">
      <p>You requested a page in Russian (Русский), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-cn">
      <p>You requested a page in Simplified Chinese (简体中文), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-tw">
      <p>You requested a page in Traditional Chinese (繁體中文), would you like to proceed with this language setting?</p>
    </div>
    <a href="#" class="button yes" onclick="return false;">
      <span class="lang en">Yes</span>
      <span class="lang es">Sí</span>
      <span class="lang ja">Yes</span>
      <span class="lang ko">Yes</span>
      <span class="lang ru">Yes</span>
      <span class="lang zh-cn">是的</span>
      <span class="lang zh-tw">没有</span>
    </a>
    <a href="#" class="button" onclick="$('#langMessage').hide();return false;">
      <span class="lang en">No</span>
      <span class="lang es">No</span>
      <span class="lang ja">No</span>
      <span class="lang ko">No</span>
      <span class="lang ru">No</span>
      <span class="lang zh-cn">没有</span>
      <span class="lang zh-tw">没有</span>
    </a>
  </div>
</div> -->


  <!-- Header -->
  <div id="header-wrapper">
    <div class="dac-header" id="header">




      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="javascript:;" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        <a class="dac-header-logo" href="../../../index.html">
          <img class="dac-header-logo-image" src="../../../assets/images/android_logo.png"
              srcset="../../../assets/images/android_logo@2x.png 2x"
              width="32" height="36" alt="Android" /> Developers
          </a>

        <ul class="dac-header-crumbs">
          
          <li class="dac-header-crumbs-item"><span class="dac-header-crumbs-link current ">In-app Billing Reference</a></li>
        </ul>

        
        
        
  <div class="dac-header-search" id="search-container">
    <div class="dac-header-search-inner">
      <div class="dac-sprite dac-search dac-header-search-btn" id="search-btn"></div>
      <form class="dac-header-search-form" onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
          onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
          onkeydown="return search_changed(event, true, '../../../')"
          onkeyup="return search_changed(event, false, '../../../')"
          class="dac-header-search-input" placeholder="Search" />
          <a class="dac-header-search-close hide" id="search-close">close</a>
      </form>
    </div><!-- end dac-header-search-inner -->
  </div><!-- end dac-header-search -->

  <div class="search_filtered_wrapper">
    <div class="suggest-card reference no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card develop no-display">
      <ul class="search_filtered">
      </ul>
      <div class="child-card guides no-display">
      </div>
      <div class="child-card training no-display">
      </div>
      <div class="child-card samples no-display">
      </div>
    </div>
    <div class="suggest-card design no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card distribute no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

        

        <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/">
          <span class="dac-sprite dac-google-play"></span>
          <span class="dac-visible-desktop-inline">Developer</span>
          Console
        </a>

      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->

    <div id="searchResults" class="wrap" style="display:none;">
      <h2 id="searchTitle">Results</h2>
      <div id="leftSearchControl" class="search-control">Loading...</div>
    </div>
  </div> <!--end header-wrapper -->

  
  <!-- Navigation-->
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>

    <ul class="dac-nav-list" data-dac-nav>
      <li class="dac-nav-item dac-nav-head">
        <a class="dac-nav-link dac-nav-logo" data-dac-toggle-nav href="javascript:;" title="Close navigation">
          <img class="dac-logo-image" src="../../../assets/images/android_logo.png"
               srcset="../../../assets/images/android_logo@2x.png 2x"
               width="32" height="36" alt="Android" /> Developers
        </a>
      </li>
      <li class="dac-nav-item home">
        <a class="dac-nav-link dac-visible-mobile-block" href="../../../index.html">Home</a>
        <ul class="dac-nav-secondary about">
          <li class="dac-nav-item about">
            <a class="dac-nav-link" href="../../../about/index.html">Android</a>
          </li>
          <li class="dac-nav-item wear">
            <a class="dac-nav-link" href="../../../wear/index.html">Wear</a>
          </li>
          <li class="dac-nav-item tv">
            <a class="dac-nav-link" href="../../../tv/index.html">TV</a>
          </li>
          <li class="dac-nav-item auto">
            <a class="dac-nav-link" href="../../../auto/index.html">Auto</a>
          </li>
        </ul>
      </li>
      <li class="dac-nav-item design">
        <a class="dac-nav-link" href="../../../design/index.html"
           zh-tw-lang="設計"
           zh-cn-lang="设计"
           ru-lang="Проектирование"
           ko-lang="디자인"
           ja-lang="設計"
           es-lang="Diseñar">Design</a>
      </li>
      <li class="dac-nav-item develop">
        <a class="dac-nav-link" href="../../../develop/index.html"
           zh-tw-lang="開發"
           zh-cn-lang="开发"
           ru-lang="Разработка"
           ko-lang="개발"
           ja-lang="開発"
           es-lang="Desarrollar">Develop</a>
        <ul class="dac-nav-secondary develop">
          <li class="dac-nav-item training">
            <a class="dac-nav-link" href="../../../training/index.html"
               zh-tw-lang="訓練課程"
               zh-cn-lang="培训"
               ru-lang="Курсы"
               ko-lang="교육"
               ja-lang="トレーニング"
               es-lang="Capacitación">Training</a>
          </li>
          <li class="dac-nav-item guide">
            <a class="dac-nav-link" href="../../../guide/index.html"
               zh-tw-lang="API 指南"
               zh-cn-lang="API 指南"
               ru-lang="Руководства по API"
               ko-lang="API 가이드"
               ja-lang="API ガイド"
               es-lang="Guías de la API">API Guides</a>
          </li>
          <li class="dac-nav-item reference">
            <a class="dac-nav-link" href="../../../reference/packages.html"
               zh-tw-lang="參考資源"
               zh-cn-lang="参考"
               ru-lang="Справочник"
               ko-lang="참조문서"
               ja-lang="リファレンス"
               es-lang="Referencia">Reference</a>
          </li>
          <li class="dac-nav-item tools">
            <a class="dac-nav-link" href="../../../sdk/index.html"
               zh-tw-lang="相關工具"
               zh-cn-lang="工具"
               ru-lang="Инструменты"
               ko-lang="도구"
               ja-lang="ツール"
               es-lang="Herramientas">Tools</a></li>
          <li class="dac-nav-item google">
            <a class="dac-nav-link" href="../../../google/index.html">Google Services</a>
          </li>
          
          <li class="dac-nav-item preview">
            <a class="dac-nav-link" href="../../../preview/index.html">Preview</a>
          </li>
        </ul>
      </li>
      <li class="dac-nav-item distribute">
        <a class="dac-nav-link" href="../../../distribute/googleplay/index.html"
           zh-tw-lang="發佈"
           zh-cn-lang="分发"
           ru-lang="Распространение"
           ko-lang="배포"
           ja-lang="配布"
           es-lang="Distribuir">Distribute</a>
        <ul class="dac-nav-secondary distribute">
          <li class="dac-nav-item googleplay">
            <a class="dac-nav-link" href="../../../distribute/googleplay/index.html">Google Play</a></li>
          <li class="dac-nav-item essentials">
            <a class="dac-nav-link" href="../../../distribute/essentials/index.html">Essentials</a></li>
          <li class="dac-nav-item users">
            <a class="dac-nav-link" href="../../../distribute/users/index.html">Get Users</a></li>
          <li class="dac-nav-item engage">
            <a class="dac-nav-link" href="../../../distribute/engage/index.html">Engage &amp; Retain</a></li>
          <li class="dac-nav-item monetize">
            <a class="dac-nav-link" href="../../../distribute/monetize/index.html">Earn</a>
          </li>
          <li class="dac-nav-item analyze">
            <a class="dac-nav-link" href="../../../distribute/analyze/index.html">Analyze</a>
          </li>
          <li class="dac-nav-item stories">
            <a class="dac-nav-link" href="../../../distribute/stories/index.html">Stories</a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>
  <!-- end navigation-->
  




  <div class="wrap clearfix" id="body-content"><div class="cols">
    <div class="col-4 dac-toggle dac-mobile" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      
  <div class="dac-visible-mobile-block" data-toggle="section">
    <span class="dac-toggle-expand dac-devdoc-toggle"><i class="dac-sprite dac-expand-more-black"></i> Show navigation</span>
    <span class="dac-toggle-collapse dac-devdoc-toggle" data-toggle-section><i class="dac-sprite dac-expand-less-black"></i> Hide navigation</span>
  </div>

      <div class="dac-toggle-content" id="devdoc-nav">
        <div class="scroll-pane">
<ul id="nav">

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../google/play/billing/index.html" zh-cn-lang="应用内结算">
      <span class="en">Google Play In-app Billing</span></a>
    </div>
    <ul>
      <li><a href="../../../google/play/billing/billing_overview.html" zh-cn-lang="应用内结算概述">
              <span class="en">Overview</span></a>
      </li>
      <li class="nav-section"><div class="nav-section-header"><a href="../../../google/play/billing/api.html" zh-cn-lang="应用内结算 API">
              <span class="en">Version 3 API</span></a></div>
              <ul>
              <li><a href="../../../google/play/billing/billing_integrate.html">
              <span class="en">Implementing the API</span></a></li>
              <li><a href="../../../google/play/billing/billing_reference.html">
              <span class="en">Reference</span></a></li>
              </ul>
      </li>
      <li class="nav-section"><div class="nav-section-header"><a href="../../../google/play/billing/v2/api.html">
              <span class="en">Version 2 API</span></a></div>
              <ul>
              <li><a href="../../../google/play/billing/v2/billing_integrate.html">
              <span class="en">Implementing the API</span></a></li>
              <li><a href="../../../google/play/billing/v2/billing_subscriptions.html">
              <span class="en">Subscriptions</span></a></li>
              <li><a href="../../../google/play/billing/v2/billing_reference.html">
              <span class="en">Reference</span></a></li>
              </ul>
      </li>
      <li><a href="../../../google/play/billing/billing_subscriptions.html">
              <span class="en">Subscriptions</span></a>
      </li>
      <li><a href="../../../google/play/billing/billing_best_practices.html" zh-cn-lang="安全性和设计">
              <span class="en">Security and Design</span></a>
      </li>
      <li><a href="../../../google/play/billing/billing_testing.html" zh-cn-lang="测试应用内结算">
              <span class="en">Testing In-app Billing</span></a>
      </li>
      <li><a href="../../../google/play/billing/billing_admin.html" zh-cn-lang="管理应用内结算">
              <span class="en">Administering In-app Billing</span></a>
      </li>
      <li><a href="../../../google/play/billing/versions.html">
              <span class="en">Version Notes</span></a>
      </li>
    </ul>
  </li>

  <li class="nav-section">
  <div class="nav-section-header empty"><a href="../../../google/play/filters.html"
       es-lang="Filtros en Google Play"
       ja-lang="Google Play 上のフィルタ"
       ko-lang="Google Play 필터"
       pt-br-lang="Filtros no Google Play"
       ru-lang="Фильтры в Google Play"
       zh-cn-lang="Google Play 上的筛选器"
       zh-tw-lang="Google Play 上的篩選器">
          Filters on Google Play</a>
      </div>
  </li>

  <li class="nav-section">
  <div class="nav-section-header empty"><a href="../../../google/play/developer-api.html">
              <span class="en">Google Play Developer API</span></a>
      </div>
  </li>
    <li class="nav-section">
  <div class="nav-section-header empty"><a href="../../../google/play/publishing/multiple-apks.html">
          <span class="en">Multiple APK Support</span></a>
      </div>
  </li>
    <li class="nav-section">
  <div class="nav-section-header empty"><a href="../../../google/play/expansion-files.html">
          <span class="en">APK Expansion Files</span></a>
      </div>
  </li>


  <li class="nav-section">

        <div class="nav-section-header"><a href="../../../google/play/licensing/index.html">
          <span class="en">Application Licensing</span></a>
        </div>
        <ul>
          <li><a href="../../../google/play/licensing/overview.html">
              <span class="en">Licensing Overview</span></a>
          </li>
          <li><a href="../../../google/play/licensing/setting-up.html">
              <span class="en">Setting Up for Licensing</span></a>
          </li>
          <li><a href="../../../google/play/licensing/adding-licensing.html">
              <span class="en">Adding Licensing to Your App</span></a>
          </li>
          <li><a href="../../../google/play/licensing/licensing-reference.html">
              <span class="en">Licensing Reference</span></a>
          </li>
        </ul>
      </li>

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../../google/backup/index.html">
      Android Backup Service</a>
    </div>
    <ul>
      <li><a href="../../../google/backup/signup.html">
          Register</a>
      </li>
    </ul>
  </li>

  </ul>

</li>



</ul>

<script type="text/javascript">
<!--
    buildToggleLists();
    changeNavLang(getLangPref());
//-->
</script>


        </div>
      </div>
      <script type="text/javascript">
       showGoogleRefTree();
    
      </script>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="col-12" id="doc-col" >


  

  
    
      
        <h1 itemprop="name" >In-app Billing Reference</h1>
      
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
<div id="qv">
  <h2>In this document</h2>
  <ol>
    <li><a href="#billing-codes">Server Response Codes</a></li>
    <li><a href="#billing-interface">API Reference</a>
    <ol>
      <li><a href="#getSkuDetails">getSkuDetails()</a></li>
      <li><a href="#getBuyIntent">getBuyIntent()</a></li>
      <li><a href="#upgrade-getBuyIntentToReplaceSkus">getBuyIntentToReplaceSkus()</a></li>
      <li><a href="#getPurchases">getPurchases()</a></li>
    </ol>
    </li>
  </ol>
  <h2>Downloads</h2>
  <ol>
    <li><a href="../../../google/play/billing/billing_integrate.html#billing-download">Sample
    Application (V3)</a></li>
  </ol>
  <h2>See also</h2>
  <ol>
    <li><a href="../../../google/play/billing/api.html">In-app Billing Version 3</a></li>
    <li><a href="../../../training/in-app-billing/index.html">Selling In-app Products</a></li>
  </ol>
</div>
</div>
<p>This documentation provides technical reference information for using the In-app Billing Version 3 API. </p>

<h2 id="billing-codes">Server Response Codes</h2>
<p>The following table lists all of the server response codes that are sent from Google Play to your application. Google Play sends the response code synchronously as an integer mapped to the <code>RESPONSE_CODE</code> key in the response <code>Bundle</code>. Your application must handle all of these response codes.</p>

<p class="table-caption" id="response-codes-table">
<strong>Table 1.</strong> Summary of response codes for In-app Billing Version 3 API calls.</p>
<table>
  <tr>
    <th scope="col">Response Code</th>
    <th scope="col">Value</th>
    <th scope="col">Description</th>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_OK</code></td>
    <td>0</td>
    <td>Success</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_USER_CANCELED</code></td>
    <td>1</td>
    <td>User pressed back or canceled a dialog</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_SERVICE_UNAVAILABLE</code></td>
    <td>2</td>
    <td>Network connection is down</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_BILLING_UNAVAILABLE</code></td>
    <td>3</td>
    <td>Billing API version is not supported for the type requested</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_ITEM_UNAVAILABLE</code></td>
    <td>4</td>
    <td>Requested product is not available for purchase</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_DEVELOPER_ERROR</code></td>
    <td>5</td>
    <td>Invalid arguments provided to the API. This error can also indicate that the application was not correctly signed or properly set up for In-app Billing in Google Play, or does not have the necessary permissions in its manifest</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_ERROR</code></td>
    <td>6</td>
    <td>Fatal error during the API action</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_ITEM_ALREADY_OWNED</code></td>
    <td>7</td>
    <td>Failure to purchase since item is already owned</td>
  </tr>
  <tr>
    <td><code>BILLING_RESPONSE_RESULT_ITEM_NOT_OWNED</code></td>
    <td>8</td>
    <td>Failure to consume since item is not owned</td>
  </tr>
</table>

<h2 id="billing-interface">API Reference</h2>
<p>The In-app Billing Version 3 API is defined in the <code>IInAppBillingService.aidl</code> file, which is included with the Version 3 <a href="../../../training/in-app-billing/preparing-iab-app.html#GetSample">sample application</a>.</p>

<h3 id="getSkuDetails">The getSkuDetails() method</h3>
<p>This method returns product details for a list of product IDs. In the response <code>Bundle</code> sent by Google Play, the query results are stored in a String <code>ArrayList</code> mapped to the <code>DETAILS_LIST</code> key. Each String in the details list contains product details for a single product in JSON format. The fields in the JSON string with the product details are summarized in table 2.</p>

<p class="table-caption" id="product-details-table">
<strong>Table 2.</strong> Description of JSON fields with product item details returned from a <code>getSkuDetails</code> request.</p>
<table>
  <tr>
    <th scope="col">Key</th>
    <th scope="col">Description</th>
  </tr>
  <tr>
    <td><code>productId</code></td>
    <td>The product ID for the product.</td>
  </tr>
  <tr>
    <td><code>type</code></td>
    <td>Value must be <code>“inapp”</code> for an in-app product or
      <code>"subs"</code> for subscriptions.</td>
  </tr>
  <tr>
    <td><code>price</code></td>
    <td>Formatted price of the item, including its currency sign. The price
does not include tax.</td>
  </tr>
  <tr>
    <td><code>price_amount_micros</code></td>
    <td>Price in micro-units, where 1,000,000 micro-units equal one unit of the
    currency. For example, if <code>price</code> is <code>"€7.99"</code>, <code>price_amount_micros</code> is <code>"7990000"</code>.</td>
  </tr>
  <tr>
    <td><code>price_currency_code</code></td>
    <td><a href="http://en.wikipedia.org/wiki/ISO_4217#Active_codes">ISO 4217
    currency code</a> for <code>price</code>. For example, if <code>price</code> is
    specified in British pounds sterling, <code>price_currency_code</code> is <code>"GBP"</code>.</td>
  </tr>
  <tr>
    <td><code>title</code></td>
    <td>Title of the product.</td>
  </tr>
  <tr>
    <td><code>description</code></td>
    <td>Description of the product.</td>
  </tr>
</table>
</p>

<h3 id="getBuyIntent">The getBuyIntent() method</h3>
<p>
  This method returns a response code integer mapped to the <code>RESPONSE_CODE</code> key, and a <code><a href="../../../reference/android/app/PendingIntent.html">PendingIntent</a></code> to launch the
  purchase flow for the in-app item mapped to the <code>BUY_INTENT</code> key, as
  described in <a href=
  "../../../google/play/billing/billing_integrate.html#purchase">Purchasing an
  Item</a>. When it receives the <code><a href="../../../reference/android/app/PendingIntent.html">PendingIntent</a></code>, Google Play
  sends a response <code>Intent</code> with the data for that purchase order. The
  data that is returned in the response <code>Intent</code> is summarized in table
  3.
</p>

<p class="table-caption" id="purchase-pendingintent-response-table">
<strong>Table 3.</strong>  Response data from an In-app Billing Version 3 purchase request.</p>
<table>
  <tr>
    <th scope="col">Key</th>
    <th scope="col">Description</th>
  </tr>
  <tr>
    <td><code>RESPONSE_CODE</code></td>
    <td>Value is <code>0</code> if the purchase was success, error otherwise.</td>
  </tr>
  <tr>
    <td><code>INAPP_PURCHASE_DATA</code></td>
    <td>
       A String in JSON format that contains details about the purchase order. See table 4 for a description of the JSON fields.
    </td>
  </tr>
  <tr>
    <td><code>INAPP_DATA_SIGNATURE</code></td>
    <td>String containing the signature of the purchase data that was signed
with the private key of the developer. The data signature uses the
RSASSA-PKCS1-v1_5 scheme.</td>
  </tr>
</table>
</p>

<p>Table 4 describes the JSON fields that are returned in the response data for a purchase order.</p>
<p class="table-caption" id="purchase-data-table">
<strong>Table 4.</strong>  Descriptions of the JSON fields for <code>INAPP_PURCHASE_DATA</code>.</p>
<table>
  <tr>
    <th scope="col">Field</th>
    <th scope="col">Description</th>
  </tr>
    <tr>
    <td><code>autoRenewing</code></td>
    <td>Indicates whether the subscription renews automatically. If
      <code>true</code>, the subscription is active, and will
      automatically renew on the next billing date. If <code>false</code>,
      indicates that the user has canceled the subscription. The user has
      access to subscription content until the next billing date and will
      lose access at that time unless they re-enable automatic renewal
      (or manually renew, as described in
      <a href="../../../google/play/billing/billing_subscriptions.html#manual-renewal">Manual
      Renewal</a>).
      If you offer a <a href="../../../google/play/billing/billing_subscriptions.html#grace-period"
      >grace period</a>, this value remains set to <code>true</code> for all
      subscriptions, as long as the grace period has not lapsed. The next billing date
      is extended dynamically every day until the end of the grace period or until the
      user fixes their payment method.
    </td>
  </tr>
  <tr>
    <td><code>orderId</code></td>
    <td>A unique order identifier for the transaction. This identifier
      corresponds to the Google payments order ID.</td>
  </tr>
  <tr>
    <td><code>packageName</code></td>
    <td>The application package from which the purchase originated.</td>
  </tr>
  <tr>
    <td><code>productId</code></td>
    <td>The item's product identifier. Every item has a product ID, which you must specify in the application's product list on the Google Play Developer Console.</td>
  </tr>
  <tr>
    <td><code>purchaseTime</code></td>
    <td>The time the product was purchased, in milliseconds since the epoch (Jan 1, 1970).</td>
  </tr>
  <tr>
    <td><code>purchaseState</code></td>
    <td>The purchase state of the order. Possible values are <code>0</code>
      (purchased), <code>1</code> (canceled), or <code>2</code> (refunded).</td>
  </tr>
  <tr>
    <td><code>developerPayload</code></td>
    <td>A developer-specified string that contains supplemental information about an order. You can specify a value for this field when you make a <code>getBuyIntent</code> request.</td>
  </tr>
  <tr>
    <td><code>purchaseToken</code></td>
    <td>A token that uniquely identifies a purchase for a given item and user pair. </td>
  </tr>
</table>
</p>

<h3 id="upgrade-getBuyIntentToReplaceSkus">The getBuyIntentToReplaceSkus()
  method</h3>

<p>This method is used to upgrade or downgrade a subscription purchase. The method
is similar to <a href="#getBuyIntent"><code>getBuyIntent()</code></a>, except
that it takes a list of already-purchased SKUs that are to be
replaced with the SKU being purchased. When the user completes the purchase,
Google Play cancels the old SKUs and credits the user with the unused value of
their subscription time on a pro-rated basis. Google Play applies this credit
to the new subscription, and does not begin billing the user for the new
subscription until after the credit is used up.</p>

<p>This method was added with version 5 of the in-app billing API. To verify
that the method is reported, send an <code>isBillingSupported</code> AIDL
request.</p>

<p class="note"><strong>Note:</strong> You can only use this method for
subscription purchases. If the passed <code>type</code> parameter is anything
other than <code>"subs"</code>, the method returns
<a href="#billing-codes"><code>BILLING_RESPONSE_RESULT_DEVELOPER_ERROR</code></a>.
Furthermore, the passed SKUs may not include SKUs for seasonal
subscriptions.</p>

<p>
  This method returns a response code integer mapped to the <code>RESPONSE_CODE</code> key, and a <code><a href="../../../reference/android/app/PendingIntent.html">PendingIntent</a></code> to launch the
  purchase flow for the in-app subscription mapped to the <code>BUY_INTENT</code>
  key, as described in <a href=
  "../../../google/play/billing/billing_integrate.html#purchase">Purchasing an
  Item</a>. When it receives the <code><a href="../../../reference/android/app/PendingIntent.html">PendingIntent</a></code>, Google Play
  sends a response <code>Intent</code> with the data for that purchase order. The
  data that is returned in the response <code>Intent</code> is summarized in table
  5.
</p>

<p class="table-caption" id="upgrade-purchase-pendingintent-response-table">
<strong>Table 5.</strong> Response data from an In-app Billing Version 5 purchase request.</p>
<table>
  <tr>
    <th scope="col">Key</th>
    <th scope="col">Description</th>
  </tr>
  <tr>
    <td><code>RESPONSE_CODE</code></td>
    <td>Value is <code>0</code> if the purchase succeeds. If the purchase fails, contains an error
      code.</td>
  </tr>
  <tr>
    <td><code>INAPP_PURCHASE_DATA</code></td>
    <td>
       A String in JSON format that contains details about the purchase order.
       See <a href="#purchase-data-table">table 4</a> for a description of the JSON fields.
    </td>
  </tr>
  <tr>
    <td><code>INAPP_DATA_SIGNATURE</code></td>
    <td>String containing the signature of the purchase data that the developer
      signed with their private key. The data signature uses the
      RSASSA-PKCS1-v1_5 scheme.</td>
  </tr>
</table>
</p>

</p>

<h3 id="getPurchases">The getPurchases() method</h3>
<p>This method returns the current un-consumed products owned by the user. Table 5 lists the response data that is returned in the <code>Bundle</code>.</p>
<p class="table-caption" id="getpurchases-response-table">
<strong>Table 6.</strong> Response data from a <code>getPurchases</code> request.</p>
<table>
  <tr>
    <th scope="col">Key</th>
    <th scope="col">Description</th>
  </tr>
  <tr>
    <td><code>RESPONSE_CODE</code></td>
    <td>Value is <code>0</code> if the request was successful, error otherwise.</td>
  </tr>
  <tr>
    <td><code>INAPP_PURCHASE_ITEM_LIST</code></td>
    <td><code>StringArrayList</code> containing the list of productIds of purchases from this app.</td>
  </tr>
  <tr>
    <td><code>INAPP_PURCHASE_DATA_LIST</code></td>
    <td><code>StringArrayList</code> containing the details for purchases from this app. See table 4 for the list of detail information stored in each <code>INAPP_PURCHASE_DATA</code> item in the list.</td>
  </tr>
  <tr>
    <td><code>INAPP_DATA_SIGNATURE_LIST</code></td>
    <td><code>StringArrayList</code> containing the signatures of purchases from this app.</td>
  </tr>
  <tr>
    <td><code>INAPP_CONTINUATION_TOKEN</code></td>
    <td>String containing a continuation token to retrieve the next set of in-app products owned by the user. This is only set by the Google Play service if the number of products owned by the user is very large. When a continuation token is present in the response, you must make another call to <code>getPurchases</code> and pass in the continuation token that you received. The subsequent <code>getPurchases</code> call returns more purchases and possibly another continuation token.</td>
  </tr>
</table>
</p>


    </div>

    

  </div> <!-- end jd-content -->

<div class="wrap">
  <div class="dac-footer">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <a class="dac-footer-getnews" data-modal-toggle="newsletter" href="javascript:;">Get news &amp; tips <span
          class="dac-fab dac-primary"><i class="dac-sprite dac-mail"></i></span></a>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="http://android-developers.blogspot.com/">Blog</a>
          <a class="dac-footer-contact-link" href="/support.html">Support</a>
        </div>
        <div class="dac-footer-social">
          <a class="dac-fab dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers"><i class="dac-sprite dac-youtube"></i></a>
          <a class="dac-fab dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers"><i class="dac-sprite dac-gplus"></i></a>
          <a class="dac-fab dac-footer-social-link" href="https://twitter.com/AndroidDev"><i class="dac-sprite dac-twitter"></i></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>

    
      <p class="dac-footer-copyright">
        
  Except as noted, this content is
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and
  restrictions, see the <a href="../../../license.html">Content
  License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="/about/index.html">About Android</a>
      <a href="/auto/index.html">Auto</a>
      <a href="/tv/index.html">TV</a>
      <a href="/wear/index.html">Wear</a>
      <a href="/legal.html">Legal</a>

      <span id="language" class="locales">
        <select name="language" onchange="changeLangPref(this.value, true)">
          <option value="en" selected="selected">English</option>
          <option value="es">Español</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
          <option value="pt-br">Português Brasileiro</option>
          <option value="ru">Русский</option>
          <option value="zh-cn">中文（简体)</option>
          <option value="zh-tw">中文（繁體)</option>
        </select>
      </span>
    </p>
  </div>
</div> <!-- end footer -->

<div data-modal="newsletter" data-newsletter data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <button class="dac-modal-header-close" data-modal-toggle><i class="dac-sprite dac-close"></i></button>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle">&#42; Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            <h2 class="norule dac-modal-header-title">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://docs.google.com/forms/d/1QgnkzbEJIDu9lMEea0mxqWrXUJu0oBCLD7ar23V0Yys/formResponse" class="dac-form" method="post" target="dac-newsletter-iframe">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel">Full name</label>
                      <input type="text" class="dac-form-input" name="entry.1357890476" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel">Email address</label>
                      <input type="email" class="dac-form-input" name="entry.472100832" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="entry.1664780309" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="entry.47013838" id="newsletter-play-store" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <legend class="dac-form-legend">Which best describes your business:<span class="dac-form-required">*</span>
                    </legend>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-app" required>
                      <label for="newsletter-business-type-app" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-app" class="dac-form-label">Apps</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-games" required>
                      <label for="newsletter-business-type-games" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-games" class="dac-form-label">Games</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps and Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-appsgames" required>
                      <label for="newsletter-business-type-appsgames" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-appsgames" class="dac-form-label">Apps &amp; Games</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.732309842" id="newsletter-add" required value="Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.<span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.2045036090" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside">I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.<span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div> <!-- end footer -->

</div><!-- end doc-content -->

</div> <!-- end .cols --> 
</div> <!-- end body-content --> 





  <script src="https://developer.android.com/ytblogger_lists_unified.js" type="text/javascript"></script>
  <script src="../../../jd_lists_unified.js?v=15" type="text/javascript"></script>
  <script src="../../../jd_extras.js?v=15" type="text/javascript"></script>
  <script src="../../../jd_collections.js?v=15" type="text/javascript"></script>
  <script src="../../../jd_tag_helpers.js?v=15" type="text/javascript"></script>

</body>
</html>
