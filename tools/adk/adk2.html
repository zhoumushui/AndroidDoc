<!DOCTYPE html>





























































































<html>
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta content="IE=edge" http-equiv="X-UA-Compatible">

<meta name="Description" content="The Android Accessory Development Kit (ADK) for 2012 is the latest reference implementation of an Android Open Accessory device, designed to help Android hardware accessory builders and software developers create accessories for Android. The ADK 2012 …">
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<title>Accessory Development Kit 2012 Guide | Android Developers</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto+Condensed">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:light,regular,medium,thin,italic,mediumitalic,bold"
  title="roboto">

<link href="../../assets/css/default.css?v=7" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var metaTags = ["adk"];
  var devsite = false;
</script>
<script src="../../assets/js/docs.js?v=6" type="text/javascript"></script>



<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5831155-1', 'android.com');
  ga('create', 'UA-49880327-2', 'android.com', {'name': 'universal'});  // New tracker);
  ga('send', 'pageview');
  ga('universal.send', 'pageview'); // Send page view for new tracker.
</script>

</head>

<body class="gc-documentation


develop" itemscope itemtype="http://schema.org/Article">
<a name="top"></a>

<!-- dialog to prompt lang pref change when loaded from hardcoded URL
<div id="langMessage" style="display:none">
  <div>
    <div class="lang en">
      <p>You requested a page in English, would you like to proceed with this language setting?</p>
    </div>
    <div class="lang es">
      <p>You requested a page in Spanish (Español), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ja">
      <p>You requested a page in Japanese (日本語), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ko">
      <p>You requested a page in Korean (한국어), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang ru">
      <p>You requested a page in Russian (Русский), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-cn">
      <p>You requested a page in Simplified Chinese (简体中文), would you like to proceed with this language setting?</p>
    </div>
    <div class="lang zh-tw">
      <p>You requested a page in Traditional Chinese (繁體中文), would you like to proceed with this language setting?</p>
    </div>
    <a href="#" class="button yes" onclick="return false;">
      <span class="lang en">Yes</span>
      <span class="lang es">Sí</span>
      <span class="lang ja">Yes</span>
      <span class="lang ko">Yes</span>
      <span class="lang ru">Yes</span>
      <span class="lang zh-cn">是的</span>
      <span class="lang zh-tw">没有</span>
    </a>
    <a href="#" class="button" onclick="$('#langMessage').hide();return false;">
      <span class="lang en">No</span>
      <span class="lang es">No</span>
      <span class="lang ja">No</span>
      <span class="lang ko">No</span>
      <span class="lang ru">No</span>
      <span class="lang zh-cn">没有</span>
      <span class="lang zh-tw">没有</span>
    </a>
  </div>
</div> -->


  <!-- Header -->
  <div id="header-wrapper">
    <div class="dac-header" id="header">




      <div class="dac-header-inner">
        <a class="dac-nav-toggle" data-dac-toggle-nav href="javascript:;" title="Open navigation">
          <span class="dac-nav-hamburger">
            <span class="dac-nav-hamburger-top"></span>
            <span class="dac-nav-hamburger-mid"></span>
            <span class="dac-nav-hamburger-bot"></span>
          </span>
        </a>
        <a class="dac-header-logo" href="../../index.html">
          <img class="dac-header-logo-image" src="../../assets/images/android_logo.png"
              srcset="../../assets/images/android_logo@2x.png 2x"
              width="32" height="36" alt="Android" /> Developers
          </a>

        <ul class="dac-header-crumbs">
          
          <li class="dac-header-crumbs-item"><span class="dac-header-crumbs-link current ">Accessory Development Kit 2012 Guide</a></li>
        </ul>

        
        
        
  <div class="dac-header-search" id="search-container">
    <div class="dac-header-search-inner">
      <div class="dac-sprite dac-search dac-header-search-btn" id="search-btn"></div>
      <form class="dac-header-search-form" onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
          onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
          onkeydown="return search_changed(event, true, '../../')"
          onkeyup="return search_changed(event, false, '../../')"
          class="dac-header-search-input" placeholder="Search" />
          <a class="dac-header-search-close hide" id="search-close">close</a>
      </form>
    </div><!-- end dac-header-search-inner -->
  </div><!-- end dac-header-search -->

  <div class="search_filtered_wrapper">
    <div class="suggest-card reference no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card develop no-display">
      <ul class="search_filtered">
      </ul>
      <div class="child-card guides no-display">
      </div>
      <div class="child-card training no-display">
      </div>
      <div class="child-card samples no-display">
      </div>
    </div>
    <div class="suggest-card design no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card distribute no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

        

        <a class="dac-header-console-btn" href="https://play.google.com/apps/publish/">
          <span class="dac-sprite dac-google-play"></span>
          <span class="dac-visible-desktop-inline">Developer</span>
          Console
        </a>

      </div><!-- end header-wrap.wrap -->
    </div><!-- end header -->

    <div id="searchResults" class="wrap" style="display:none;">
      <h2 id="searchTitle">Results</h2>
      <div id="leftSearchControl" class="search-control">Loading...</div>
    </div>
  </div> <!--end header-wrapper -->

  
  <!-- Navigation-->
  <nav class="dac-nav">
    <div class="dac-nav-dimmer" data-dac-toggle-nav></div>

    <ul class="dac-nav-list" data-dac-nav>
      <li class="dac-nav-item dac-nav-head">
        <a class="dac-nav-link dac-nav-logo" data-dac-toggle-nav href="javascript:;" title="Close navigation">
          <img class="dac-logo-image" src="../../assets/images/android_logo.png"
               srcset="../../assets/images/android_logo@2x.png 2x"
               width="32" height="36" alt="Android" /> Developers
        </a>
      </li>
      <li class="dac-nav-item home">
        <a class="dac-nav-link dac-visible-mobile-block" href="../../index.html">Home</a>
        <ul class="dac-nav-secondary about">
          <li class="dac-nav-item about">
            <a class="dac-nav-link" href="../../about/index.html">Android</a>
          </li>
          <li class="dac-nav-item wear">
            <a class="dac-nav-link" href="../../wear/index.html">Wear</a>
          </li>
          <li class="dac-nav-item tv">
            <a class="dac-nav-link" href="../../tv/index.html">TV</a>
          </li>
          <li class="dac-nav-item auto">
            <a class="dac-nav-link" href="../../auto/index.html">Auto</a>
          </li>
        </ul>
      </li>
      <li class="dac-nav-item design">
        <a class="dac-nav-link" href="../../design/index.html"
           zh-tw-lang="設計"
           zh-cn-lang="设计"
           ru-lang="Проектирование"
           ko-lang="디자인"
           ja-lang="設計"
           es-lang="Diseñar">Design</a>
      </li>
      <li class="dac-nav-item develop">
        <a class="dac-nav-link" href="../../develop/index.html"
           zh-tw-lang="開發"
           zh-cn-lang="开发"
           ru-lang="Разработка"
           ko-lang="개발"
           ja-lang="開発"
           es-lang="Desarrollar">Develop</a>
        <ul class="dac-nav-secondary develop">
          <li class="dac-nav-item training">
            <a class="dac-nav-link" href="../../training/index.html"
               zh-tw-lang="訓練課程"
               zh-cn-lang="培训"
               ru-lang="Курсы"
               ko-lang="교육"
               ja-lang="トレーニング"
               es-lang="Capacitación">Training</a>
          </li>
          <li class="dac-nav-item guide">
            <a class="dac-nav-link" href="../../guide/index.html"
               zh-tw-lang="API 指南"
               zh-cn-lang="API 指南"
               ru-lang="Руководства по API"
               ko-lang="API 가이드"
               ja-lang="API ガイド"
               es-lang="Guías de la API">API Guides</a>
          </li>
          <li class="dac-nav-item reference">
            <a class="dac-nav-link" href="../../reference/packages.html"
               zh-tw-lang="參考資源"
               zh-cn-lang="参考"
               ru-lang="Справочник"
               ko-lang="참조문서"
               ja-lang="リファレンス"
               es-lang="Referencia">Reference</a>
          </li>
          <li class="dac-nav-item tools">
            <a class="dac-nav-link" href="../../sdk/index.html"
               zh-tw-lang="相關工具"
               zh-cn-lang="工具"
               ru-lang="Инструменты"
               ko-lang="도구"
               ja-lang="ツール"
               es-lang="Herramientas">Tools</a></li>
          <li class="dac-nav-item google">
            <a class="dac-nav-link" href="../../google/index.html">Google Services</a>
          </li>
          
          <li class="dac-nav-item preview">
            <a class="dac-nav-link" href="../../preview/index.html">Preview</a>
          </li>
        </ul>
      </li>
      <li class="dac-nav-item distribute">
        <a class="dac-nav-link" href="../../distribute/googleplay/index.html"
           zh-tw-lang="發佈"
           zh-cn-lang="分发"
           ru-lang="Распространение"
           ko-lang="배포"
           ja-lang="配布"
           es-lang="Distribuir">Distribute</a>
        <ul class="dac-nav-secondary distribute">
          <li class="dac-nav-item googleplay">
            <a class="dac-nav-link" href="../../distribute/googleplay/index.html">Google Play</a></li>
          <li class="dac-nav-item essentials">
            <a class="dac-nav-link" href="../../distribute/essentials/index.html">Essentials</a></li>
          <li class="dac-nav-item users">
            <a class="dac-nav-link" href="../../distribute/users/index.html">Get Users</a></li>
          <li class="dac-nav-item engage">
            <a class="dac-nav-link" href="../../distribute/engage/index.html">Engage &amp; Retain</a></li>
          <li class="dac-nav-item monetize">
            <a class="dac-nav-link" href="../../distribute/monetize/index.html">Earn</a>
          </li>
          <li class="dac-nav-item analyze">
            <a class="dac-nav-link" href="../../distribute/analyze/index.html">Analyze</a>
          </li>
          <li class="dac-nav-item stories">
            <a class="dac-nav-link" href="../../distribute/stories/index.html">Stories</a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>
  <!-- end navigation-->
  




  <div class="wrap clearfix" id="body-content"><div class="cols">
    <div class="col-3 dac-toggle dac-mobile" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      
  <div class="dac-visible-mobile-block" data-toggle="section">
    <span class="dac-toggle-expand dac-devdoc-toggle"><i class="dac-sprite dac-expand-more-black"></i> Show navigation</span>
    <span class="dac-toggle-collapse dac-devdoc-toggle" data-toggle-section><i class="dac-sprite dac-expand-less-black"></i> Hide navigation</span>
  </div>

      <div class="dac-toggle-content" id="devdoc-nav">
        <div class="scroll-pane">
<ul id="nav">

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../sdk/index.html"><span class="en">Download</span></a></div>
    <ul>
      <li><a href="../../sdk/installing/index.html">
          <span class="en">Installing the SDK</span></a></li>

      <li><a href="../../sdk/installing/adding-packages.html">
          <span class="en">Adding SDK Packages</span></a></li>
    </ul>
  </li>


<!-- Android Studio menu-->

 <li class="nav-section">
    <div class="nav-section-header">
      <a href="../../tools/studio/index.html">Android Studio</a>
    </div>
    <ul>
      <li><a href="../../tools/studio/studio-config.html">
          Configuration</a></li>
      <li><a href="../../tools/studio/studio-features.html">
          Features</a></li>
      <li><a href="../../sdk/installing/studio-tips.html">
          Tips and Tricks</a></li>
    </ul>

 </li><!-- End of Android Studio menu -->


<!-- Workflow menu-->

  <li class="nav-section">
    <div class="nav-section-header">
        <a href="../../tools/workflow/index.html"><span class="en">Workflow</span></a>
    </div>
    <ul>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../tools/devices/index.html"><span class="en">Setting Up Virtual Devices</span></a></div>
        <ul>
          <li><a href="../../tools/devices/managing-avds.html"><span class="en">With AVD Manager</span></a></li>
          <li><a href="../../tools/devices/managing-avds-cmdline.html"><span class="en">From the Command Line</span></a></li>
          <li><a href="../../tools/devices/emulator.html"><span class="en">Using the Emulator</span></a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../tools/device.html"><span class="en">Using Hardware Devices</span></a></div>
        <ul>
          <li><a href="../../tools/extras/oem-usb.html"><span
            class="en">USB Drivers</span></a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../tools/projects/index.html"><span class="en">Managing Projects</span></a></div>
        <ul>
          <li><a href="../../sdk/installing/create-project.html"><span class="en">From Android Studio</span></a></li>
          <li><a href="../../tools/projects/projects-cmdline.html"><span class="en">From the Command Line</span></a></li>
          <li><a href="../../tools/projects/templates.html"><span class="en">Using Code Templates</span></a></li>
        </ul>
      </li>


      <li class="nav-section">
        <div class="nav-section-header">
          <a href="../../tools/building/index.html">
          <span class="en">Building and Running</span></a>
        </div>
        <ul>
          <li><a href="../../tools/building/building-studio.html">
            <span class="en">From Android Studio</span></a></li>
          <li><a href="../../tools/building/building-cmdline.html">
            <span class="en">From the Command Line</span></a></li>
        </ul>
      </li>


  <li class="nav-section">
        <div class="nav-section-header"><a href="../../tools/testing/index.html">
            <span class="en">Testing</span>
          </a></div>
        <ul>
          <li>
            <a href="../../tools/testing/testing_android.html">
            <span class="en">Fundamentals</span></a>
          </li>
          <li><a href="../../tools/testing/testing_eclipse.html">
            <span class="en">From Eclipse</span></a>
          </li>
          <li><a href="../../tools/testing/testing_otheride.html">
            <span class="en">From Other IDEs</span></a>
          </li>
          <li>
            <a href="../../tools/testing/activity_testing.html">
            <span class="en">Activity Testing</span></a>
          </li>
          <li>
            <a href="../../tools/testing/service_testing.html">
            <span class="en">Service Testing</span></a>
          </li>
          <li>
            <a href="../../tools/testing/contentprovider_testing.html">
            <span class="en">Content Provider Testing</span></a>
          </li>
          <li>
            <a href="../../tools/testing/testing_accessibility.html">
            <span class="en">Accessibility Testing</span></a>
          </li>
           <li>
            <a href="../../tools/testing/testing_ui.html">
            <span class="en">UI Testing</span></a>
          </li>
          <li>
            <a href="../../tools/testing/what_to_test.html">
            <span class="en">What To Test</span></a>
          </li>
          <li>
            <a href="../../tools/testing/activity_test.html">
            <span class="en">Activity Testing Tutorial</span></a>
          </li>
        </ul>
  </li><!-- end of testing -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../tools/debugging/index.html"><span class="en">Debugging</span></a></div>
    <ul>
      <li><a href="../../tools/debugging/debugging-studio.html"><span class="en">From Android Studio</span></a></li>
      <li><a href="../../tools/debugging/debugging-projects-cmdline.html"><span class="en">From Other IDEs</span></a></li>
      <li><a href="../../tools/debugging/ddms.html"><span class="en">Using DDMS</span></a></li>
      <li><a href="../../tools/debugging/debugging-log.html"><span class="en">Reading and Writing Logs</span></a></li>
      <li><a href="../../tools/debugging/improving-w-lint.html"><span class="en">Improving Your Code with lint</span></a></li>
      <li><a href="../../tools/debugging/debugging-ui.html"><span class="en">Optimizing your UI</span></a></li>
      <li><a href="../../tools/debugging/debugging-tracing.html"><span class="en">Profiling with Traceview and dmtracedump</span></a></li>
      <li><a href="../../tools/debugging/annotations.html"><span class="en">Improving Code Inspection with Annotations</span></a></li>
      <li><a href="../../tools/debugging/systrace.html"><span class="en">Analyzing UI Performance</span></a></li>
      <li><a href="../../tools/debugging/debugging-memory.html">Investigating Your RAM Usage</a></li>
      <li><a href="../../tools/debugging/debugging-devtools.html"><span class="en">Using the Dev Tools App</span></a></li>
    </ul>
  </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../tools/publishing/publishing_overview.html" zh-cn-lang="发布概述"><span class="en">Publishing</span></a></div>
        <ul>
          <li><a href="../../tools/publishing/preparing.html" zh-cn-lang="准备发布"><span class="en">Preparing for Release</span></a></li>
          <li><a href="../../tools/publishing/versioning.html"><span class="en">Versioning Your Apps</span></a></li>
          <li><a href="../../tools/publishing/app-signing.html"><span class="en">Signing Your Apps</span></a></li>
        </ul>
      </li>
    </ul>
  </li>


  <li class="nav-section">
    <div class="nav-section-header"><a href="../../tools/help/index.html"><span
class="en">Tools Help</span></a></div>
    <ul>
      <li><a href="../../tools/help/adb.html">adb</a></li>
      <li><a href="../../tools/help/android.html">android</a></li>
      <li><a href="../../tools/help/avd-manager.html">AVD Manager</a></li>
      <li><a href="../../tools/help/bmgr.html">bmgr</a>
      <li><a href="../../tools/help/monitor.html">Device Monitor</a></li>
      <li><a href="../../tools/help/dmtracedump.html">dmtracedump</a></li>
      <li><a href="../../tools/help/draw9patch.html">Draw 9-Patch</a></li>
      <li><a href="../../tools/help/emulator.html">Emulator</a></li>
      <li><a href="../../tools/help/etc1tool.html">etc1tool</a></li>
      <li><a href="../../tools/help/hierarchy-viewer.html">Hierarchy Viewer</a></li>
      <li><a href="../../tools/help/hprof-conv.html">hprof-conv</a></li>
      <li><a href="../../tools/help/jobb.html">jobb</a></li>
      <li><a href="../../tools/help/lint.html">lint</span></a></li>
      <li><a href="../../tools/help/logcat.html">logcat</a></li>
      <li><a href="../../tools/help/mksdcard.html">mksdcard</a></li>
       <li><a href="../../tools/help/proguard.html" zh-cn-lang="ProGuard">ProGuard</a></li>
       <li><a href="../../tools/help/sdk-manager.html">SDK Manager</a></li>
       <li><a href="../../tools/help/systrace.html">Systrace</a></li>
       <li><a href="../../tools/help/gltracer.html">Tracer for OpenGL ES</a></li>
       <li><a href="../../tools/help/traceview.html">Traceview</a></li>
       <li><a href="../../tools/help/zipalign.html">zipalign</a></li>
    </ul>
  </li>

  </li><!-- end of tools help -->


<!-- Build System menu-->

  <li class="nav-section">
    <div class="nav-section-header">
      <a href="../../sdk/installing/studio-build.html">Build System</a>
    </div>
    <ul>
      <li><a href="../../tools/building/configuring-gradle.html">
        <span class="en">Configuring Gradle Builds</span></a></li>
      <li><a href="../../tools/building/plugin-for-gradle.html">
        <span class="en">Android Plugin for Gradle</span></a></li>
      <li><a href="../../tools/building/manifest-merge.html">
        <span class="en">Manifest Merging</span></a></li>
      <li><a href="../../tools/building/multidex.html">
        <span class="en">Apps Over 65K Methods</span></a></li>
      </ul>
  </li><!-- end of build system -->


<!-- Performance Tools menu-->
  <li class="nav-section">
    <div class="nav-section-header">
      <a href="../../tools/performance/index.html">Peformance Tools</a>
    </div>
    <ul>
      <li><a href="../../tools/performance/debug-gpu-overdraw/index.html">
        Overdraw Debugger</a>
      </li>
      <li><a href="../../tools/performance/profile-gpu-rendering/index.html">
        Rendering Profiler</a>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="../../tools/performance/hierarchy-viewer/index.html">
          Hierarchy Viewer</a></div>
        <ul>
          <li><a href="../../tools/performance/hierarchy-viewer/setup.html"><span
            class="en">Setup</span></a>
          </li>
          <li><a href="../../tools/performance/hierarchy-viewer/profiling.html"><span
            class="en">Profiling</span></a>
          </li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="../../tools/performance/comparison.html">
          Memory Profilers</a></div>
        <ul>
          <li><a href="../../tools/performance/memory-monitor/index.html"><span
            class="en">Memory Monitor</span></a>
          </li>
          <li><a href="../../tools/performance/heap-viewer/index.html"><span
            class="en">Heap Viewer</span></a>
          </li>
          <li><a href="../../tools/performance/allocation-tracker/index.html"><span
            class="en">Allocation Tracker</span></a>
          </li>
        </ul>
      </li>
      <li><a href="../../tools/performance/traceview/index.html">
        Traceview</a>
      </li>
      <li><a href="../../tools/performance/systrace/index.html">
        Systrace</a>
      </li>
      <li class="nav-section">
        <div class="nav-section-header">
          <a href="../../tools/performance/batterystats-battery-historian/index.html">
          Battery Profilers</a></div>
        <ul>
          <li><a href="../../tools/performance/batterystats-battery-historian/charts.html"><span
            class="en">Historian Charts</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li><!-- End Performance Tools menu-->


  <!-- Testing Tools menu-->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../tools/testing/testing-tools.html"><span class="en">Testing Tools</span></a></div>
    <ul>
      <li class="nav-section">
         <div class="nav-section-header"><a href="../../tools/testing-support-library/index.html"><span
class="en">Testing Support Library</span></a></div>
         <ul>
            <li><a href="../../reference/android/support/test/package-summary.html">API Reference</a></li>
         </ul>
      </li>
      <li><a href="../../tools/help/monkey.html">monkey</a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../tools/help/monkeyrunner_concepts.html"><span class="en">monkeyrunner</span></a></div>
        <ul>
          <li><a href="../../tools/help/MonkeyDevice.html"><span
class="en">MonkeyDevice</span></a></li>
          <li><a href="../../tools/help/MonkeyImage.html"><span
class="en">MonkeyImage</span></a></li>
          <li><a href="../../tools/help/MonkeyRunner.html"><span
class="en">MonkeyRunner</span></a></li>
        </ul>
      </li>
    </ul>
  </li><!-- end of testing support library -->


<!-- Support Library menu-->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../tools/support-library/index.html"><span
class="en">Support Library</span></a></div>
    <ul>
      <li><a href="../../tools/support-library/features.html">Features</a></li>
      <li><a href="../../tools/support-library/setup.html">Setup</a></li>
    </ul>
  </li><!-- end of support library -->

  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../tools/data-binding/guide.html"><span
class="en">Data Binding Library</span></a></div>
  </li><!-- end of support library -->


<!-- Revision menu-->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../tools/revisions/index.html"><span class="en">Revisions</span></a></div>
    <ul>
      <li><a href="../../tools/revisions/studio.html">
        <span class="en">Android Studio</span>
      </a></li>
      <li><a href="../../tools/sdk/tools-notes.html">
        <span class="en">SDK Tools</span>
      </a></li>
      <li><a href="../../tools/revisions/build-tools.html">
        <span class="en">SDK Build Tools</span>
      </a></li>
      <li><a href="../../tools/revisions/gradle-plugin.html">
        <span class="en">Android Plugin for Gradle</span>
      </a></li>
      <li><a href="../../tools/revisions/platforms.html">
        <span class="en">SDK Platforms</span></a></li>
      <li><a href="../../tools/sdk/eclipse-adt.html">
        <span class="en">ADT Plugin</span></a></li>
    </ul>
  </li>

  <li class="nav-section">
    <div class="nav-section-header empty">
      <a href="../../tools/sdk/ndk/index.html">NDK</a>
    </div>
  </li>

<!--  <li class="nav-section">
    <div class="nav-section-header">
    <a href="../../tools/adk/index.html">
      <span class="en">ADK</span></a>
    </div>
    <ul>
      <li><a href="../../tools/adk/adk2.html">ADK 2012 Guide</a></li>
      <li><a href="../../tools/adk/adk.html">ADK 2011 Guide</a></li>
    </ul>
  </li> -->


<!-- Eclipse ADT menu-->

  <li class="nav-section">
    <div class="nav-section-header">
    <a href="../../tools/help/adt.html">
      <span class="en">Eclipse with ADT</span></a>
    </div>
    <ul>
        <li class="nav-section">
        <div class="nav-section-header"><a href="../../sdk/installing/migrate.html">
          <span class="en">Migrating to Android Studio</span></a></div>
         <ul>
            <li><a href="../../tools/studio/eclipse-transition-guide.html">
            Transition Guide</span></a> </li>
         </ul>
        </li>

    <li><a href="../../sdk/installing/installing-adt.html">
        <span class="en">Installing the Eclipse Plugin</span></a></li>
    <li><a href="../../tools/projects/projects-eclipse.html">Managing Projects</a></li>
    <li><a href="../../tools/building/building-eclipse.html">Building and Running</a></li>
    <li><a href="../../tools/building/building-cmdline-ant.html">Building with Ant</a></li>
    <li><a href="../../tools/testing/testing_eclipse.html">Testing</a></li>
    <li><a href="../../tools/debugging/debugging-projects.html">Debugging</a></li>
    <li><a href="../../tools/publishing/app-signing-eclipse.html">Signing Your Apps</a></li>
    </ul>
  </li><!-- end of Eclipse  -->


</ul><!-- nav -->

<script type="text/javascript">
<!--
    buildToggleLists();
    changeNavLang(getLangPref());
//-->
</script>

        </div>
      </div>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="col-13" id="doc-col" >


  

  
    
      
        <h1 itemprop="name" >Accessory Development Kit 2012 Guide</h1>
      
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
  <div id="qv">
    <h2>In this document</h2>
    <ol>
      <li><a href="#components">Components</a></li>
      <li><a href="#clock">Using the Alarm Clock</a></li>
      <li><a href="#play-audio">Playing Audio</a></li>
      <li><a href="#dev">Developing Accessories with ADK 2012</a>
        <ol>
          <li><a href="#src-download">Downloading the ADK Source</a></li>
          <li><a href="#dev-setup">Setting Up the Development Environment</a></li>
          <li><a href="#alt-build">Using the ADK Alternative Build System</a></li>
        </ol>
      </li>
      <li><a href="#adk-conn">How the ADK Connects with Android Devices</a>
        <ol>
          <li><a href="#adk-conn-bt">ADK Connection over Bluetooth</a></li>
          <li><a href="#adk-conn-usb">ADK Connection over USB</a></li>
        </ol>
      </li>
      <li><a href="#audio-dock">USB Audio Dock Implementation</a></li>
    </ol>

    <h2>See also</h2>
    <ol>
      <li><a href="https://developers.google.com/events/io/sessions/gooio2012/128/">
        Google I/O Session Video</a></li>
      <li><a href="http://source.android.com/tech/accessories/aoap/aoa.html">
        Android Open Accessory Protocol</a></li>
      <li><a href="http://source.android.com/tech/accessories/aoap/aoa2.html">
        Android Open Accessory Protocol 2.0</a></li>
      <li><a href="../../guide/topics/connectivity/usb/accessory.html">
        USB Accessory Dev Guide</a></li>
    </ol>
  </div>
</div>

<p>The Android Accessory Development Kit (ADK) for 2012 is the latest reference implementation of an
<a href="http://source.android.com/tech/accessories/index.html">Android Open Accessory</a> device,
designed to help Android hardware accessory builders and software developers create accessories
for Android. The ADK 2012 is based on the <a href="http://arduino.cc">Arduino</a> open source
electronics prototyping platform, with some hardware and software extensions that allow it to
communicate with Android devices.</p>

<p>A limited number of these kits were produced and distributed at the Google I/O 2012 developer
conference. If you did not receive one of these kits, fear not! The specifications and design files
for the hardware were also released for use by manufacturers and hobbyists. You should expect to see
kits with similar features available for purchase, or you can build one yourself!</p>

<p>One of the important new features demonstrated by this ADK is the ability to play audio over a
USB connection. Be sure to check out the <a href="#audio-dock">reference implementation</a> of a USB
audio dock in this ADK if you are interested in making audio-related USB accessories for
Android.</p>

<h2 id="components">Components</h2>

<p>The ADK 2012 is based on the Arduino open source electronics prototyping platform and is an open
hardware design. The hardware design files and firmware source code are included with the ADK
software download. The ADK contains two main physical hardware components:</p>

<ol>
  <li>Main processing board containing the microprocessor, USB connections, power connector and
input/output pins. This board can be removed and used separately from the rest of the hardware.</li>
  <li>Shield containing sensors, LEDs, input controls, audio amplifier and speaker output, contained
in a custom, polygon box enclosure.</li>
</ol>

<p>The main hardware features of the ADK are as follows:</p>

<ul>
  <li>An ARM 32-bit Cortex M3 micro-processor</li>
  <li>Separate USB connections for an Android device and computer connection for programming and
debugging</li>
  <li>Sensors for light, color, proximity, temperature, humidity, barometric pressure, and
acceleration</li>
  <li>Micro SD Card slot</li>
  <li>Bluetooth support</li>
</ul>

<p>The ADK comes preloaded with an alarm clock firmware program that you can use immediately. A
companion Android application, <a
href="https://play.google.com/store/apps/details?id=com.google.android.apps.adk2">ADK 2012</a>, is
available on Google Play. The source code for both the Android application and the ADK firmware (an
Arduino sketch) can be downloaded from this page.</p>

<p>The ADK 2012 also comes with additional parts to help you develop accessories with it,
including:</p>

<ul>
  <li>AC power adapter</li>
  <li>USB A to Micro USB B connector cable</li>
  <li>Micro USB B to Micro USB AB connector (small, rectangular plug)</li>
  <li>Micro SD Card, preinstalled in the ADK SD Card socket</li>
</ul>

<h2 id="clock">Using the Alarm Clock</h2>

<p>An alarm clock program comes preloaded on the ADK. This firmware program allows you to use the
ADK as an alarm clock.</p>

<p>To use the ADK as an alarm clock:</p>

<ol>
  <li>Open up the ADK by gently squeezing the two widest faces of the enclosure.</li>
  <li>Attach the provided AC power adapter (round connector) to the main ADK board, or attach a USB
cable to the port marked <strong>Computer</strong> and a USB port on your computer.</li>
  <li>Place and hold your fingertip over the clock symbol on the control face.
    <p class="note"><strong>Note:</strong> You may need to hold your finger in place for 1-2
seconds.</p>
  </li>
  <li>Use the plus (+) and minus (-) symbols inside the clock digits to set the correct time.</li>
  <li>Place your fingertip over the alarm clock symbol to activate alarm setting.</li>
  <li>Use the plus (+) and minus (-) symbols inside the clock digits to set the alarm time.</li>
  <li>Use the plus (+) and minus (-) symbols inside the last two clock digits to turn the alarm on
(<code>on</code>) or off (<code>oF</code>).</li>
  <li>To set the alarm tone, place and hold your fingertip over the alarm clock symbol, then tap the
slider control on top of the enclosure.</li>
</ol>

<p>To use the <strong>ADK 2012</strong> companion application for the alarm clock:</p>

<ol>
  <li>Load the companion application on your Android device running Android 3.1 (API Level 12) or
higher:
    <ul>
      <li>Using an NFC-enabled Android device, unlock and hold the device against the left side of
the ADK enclosure. Follow the prompts to install the app.
      <br>- or -</li>
      <li>Start Google Play on your device, search for the <strong>ADK 2012</strong> application and
install it. If you cannot find the app, your device is not compatible. Try installing on another
device.</li>
    </ul>
  </li>
  <li>Connect your Android device to the ADK using one of the following methods:
    <ul>
      <li id="conn-bt">To connect using Bluetooth:
        <ol>
          <li>Plug the AC power adapter into the ADK.</li>
          <li>On your Android device, turn Bluetooth On (<strong>Settings >
Bluetooth</strong>).</li>
          <li>In the <strong>Settings</strong> page, press the <strong>Bluetooth</strong> option to
view paired devices.</li>
          <li>Select <strong>Search for Devices</strong> to locate the ADK 2012 accessory and follow
the on screen instructions to connect.</li>
          <li>After pairing is complete, start the <strong>ADK 2012</strong> app on your Android
device.</li>
          <li>On the start screen, select the <strong>Use Bluetooth</strong> button.</li>
          <li>In the list of paired devices, select the <strong>ADK 2012</strong> device.</li>
          <li>The <strong>ADK 2012</strong> app should switch to the menu screen and you can start
interacting with the ADK accessory.</li>
        </ol>
      </li>

      <li id="conn-usb">To connect using USB:
        <ol>
          <li>Plug the AC power adapter into the ADK.</li>
          <li>Connect the Micro USB AB connector (small, rectangular plug) to the port labeled
<strong>Phone</strong> on the ADK board.</li>
          <li>Unlock your Android device and connect the Micro USB B connector to your device.
            <p class="note"><strong>Note:</strong> Your device must support Android USB accessory
mode. Devices that support this mode include Google Nexus devices.</p>
          </li>
          <li>On the Android device, you should see a prompt to connect to the <strong>ADK DemoKit
2012</strong>, select <strong>OK</strong>.</li>
          <li>The <strong>ADK 2012</strong> app should start automatically and you can start
interacting with the ADK.</li>
        </ol>
      </li>
    </ul>
  </li>
</ol>

<p class="note"><strong>Note:</strong> When using the ADK with a USB connection to an Android
device, make sure the AC power adapter is plugged in. A USB connection to a computer does not
provide sufficient voltage to power both the ADK and a USB connection to a device.</p>


<h2 id="play-audio">Playing Audio</h2>

<p>The ADK 2012 comes with audio output capabilities, including an amplifier and speaker. You can
use it to play audio from your Android device using either a Bluetooth or USB connection.</p>

<p>To play audio over Bluetooth:</p>

<ol>
  <li>Follow the instructions in the <a href="#conn-bt">previous section</a> to connect your Android
device to the ADK over Bluetooth.</li>
  <li>On your Android device, navigate to the <strong>Settings > Bluetooth</strong> page to view the
list of paired devices, and make sure the ADK is connected.</li>
  <li>Select the settings icon next to the <strong>ADK 2012</strong> item.</li>
  <li>Make sure the <strong>Media Audio</strong> option is enabled.</li>
  <li>Navigate to an application that plays music or other audio.</li>
  <li>Play a song or sound and listen to it on the ADK speaker!</li>
</ol>

<p>To play audio over USB, you must use a device running Android 4.1 (API Level 16) or higher:</p>

<ol>
  <li>Plug the AC power adapter into the ADK.</li>
  <li>Connect the Micro USB AB connector (small, rectangular plug) to the Phone port on the ADK
board.</li>
  <li>Unlock your Android device and connect the Micro USB B connector to your device.
    <p class="note"><strong>Note:</strong> Your device must support Android USB accessory
mode. Devices that support this mode include Google Nexus devices.</p>
  </li>
  <li>On the Android device, you should see a prompt to connect to the <strong>ADK DemoKit
2012</strong>, select <strong>Cancel</strong> and allow the ADK to connect as a media device
only.</li>
  <li>Navigate to an application that plays music or other audio.</li>
  <li>Play a song or sound and listen to it on the ADK speaker!</li>
</ol>

<p class="note"><strong>Note:</strong> When using the ADK with a USB connection to an Android
device, make sure the AC power adapter is plugged in. A USB connection to a computer does not
provide sufficient voltage to power both the ADK and a USB connection to a device.</p>


<h2 id="dev">Developing Accessories with ADK 2012</h2>

<p>The ADK 2012 is a hardware platform and a set of software libraries for prototyping Android
accessories. This section discusses how to set up a development environment for programming the ADK
to make it do what you want and to test software for building your own Android accessories.</p>

<h3 id="src-download">Downloading the ADK Source</h3>

<p>The support software and hardware specifications for the ADK 2012 are available from the Android
source repository. Follow the instructions below to obtain the source material for the ADK.</p>

<p>To download the ADK 2012 software, source code and hardware design specifications.</p>

<ol>
  <li>Download and install <a href="http://git-scm.com/download">Git</a> for your development
system.</li>
  <li>Download and setup the <code>repo</code> tool, as described on the <a
href="http://source.android.com/source/downloading.html#installing-repo">Android open source
project</a> site.
    <p class="note"><strong>Note:</strong> Developers using Windows must use a Linux compatibility
package, such as <a href="http://www.cygwin.com/">cygwin</a>, to install and run <code>repo</code>.
Within your compatibility environment, you must install <code>curl</code>, <code>git</code> and <code>python</code> to be able to download and use the <code>repo</code> tool.</p>
  </li>
  <li>In a terminal window, create a new directory for the downloaded source files, initialize and
synchronize a local repository:
<pre>
$> mkdir android-accessories
$> cd android-accessories
$> repo init -u https://android.googlesource.com/accessories/manifest
$> repo sync
</pre>
  </li>
</ol>

<p>After successfully completing this process, you should have the source code and tools for
working with the ADK 2012:</p>

<ul>
  <li><code>adk2012/board</code> - Source code and hardware design files for the ADK 2012</li>
  <li><code>adk2012/app</code> - Source code for the ADK 2012 Android companion application</li>
  <li><code>external/ide</code> - Source code for the ADK 2012 Integrated Development Environment
(IDE)</li>
  <li><code>external/toolchain</code> - The toolchain used by the ADK 2012 IDE</li>
</ul>


<h3 id="dev-setup">Setting Up the Development Environment</h3>

<p>The ADK 2012 comes with an integrated development environment (IDE) that you use to develop
software and program the ADK 2012 accessory. The following instructions explain how to setup and run
the ADK 2012 IDE.</p>

<p>To set up and run the ADK 2012 IDE:</p>

<ol>
  <li>Download and install the Java Development Kit 6 or higher from <a
    href="http://java.oracle.com">java.oracle.com</a>.</li>
  <li>Download the ADK 2012 IDE for your development platform:
    <ul>
      <li><a href="https://dl-ssl.google.com/android/adk/adk2012_ide-win32-20120629.zip">
          Windows</a></li>
      <li><a href="https://dl-ssl.google.com/android/adk/adk2012_ide-macosx-20120626.zip">
          Mac</a></li>
      <li>Linux
        <a href="https://dl-ssl.google.com/android/adk/adk2012_ide-linux32-20120626.tgz">32bit</a>,
        <a href="https://dl-ssl.google.com/android/adk/adk2012_ide-linux64-20120626.tgz">64bit</a>
      </li>
    </ul>
  </li>
  <li>Unpack the downloaded archive.</li>
  <li>Run the application by navigating to the unpacked <code>ADK2012_IDE/</code> folder and execute
    the <code>arduino</code> file.</li>
</ol>

<p>After you have successfully installed and run the ADK 2012 IDE, you must configure it to use
the ADK 2012 library.</p>

<p>To configure the ADK 2012 IDE for use with the ADK libraries:</p>

<ol>
  <li>Start the ADK 2012 IDE and choose <strong>File > Preferences</strong>.</li>
  <li>In the <strong>Preferences</strong> dialog, make a note of the <strong>Sketchbook
location</strong> directory.</li>
  <li>Copy the <code>&lt;adk-source-download&gt;/adk2012/board/library/ADK2</code> directory and its
contents into your <code>sketchbook/libraries/</code> directory, so that you create a <code>sketchbook/libraries/ADK2</code> directory.</li>
  <li>Stop and restart the <strong>ADK 2012 IDE</strong>.</li>
  <li>In the IDE, choose <strong>File > Examples > ADK2</strong> and then choose one of the example
sketches:
    <ul>
      <li><strong>clock</strong> - The sketch that is preloaded onto the ADK 2012.</li>
      <li><strong>BluetoothScan</strong> - An example sketch demonstrating code that connects an
accessory to an Android device over Bluetooth.</li>
      <li><strong>usbaccessory</strong> - An example sketch demonstrating code that connects an
accessory to an Android device through a USB cable.</li>
    </ul>
  </li>
  <li>Connect a Micro USB cable from the <strong>Computer</strong> port on the ADK board to your
development computer.</li>
  <li>In the <strong>ADK 2012 IDE</strong>, establish a serial port connection with the ADK by
selecting <strong>Tools > Serial Port</strong> and selecting the serial port for the ADK.</li>
  <li>In the <strong>ADK 2012 IDE</strong>, choose the ADK by selecting<strong>Tools > Board >
Google ADK2</strong>.</li>
  <li>Modify an example sketch or create your own.</li>
  <li>Upload the sketch to the ADK by choosing <strong>File > Upload</strong>. When the <strong>ADK
2012 IDE</strong> reports <strong>Done uploading</strong>, the sketch is uploaded and the ADK is
ready to communicate with your Android device.</li>
</ol>

<h3 id="alt-build">Using the ADK Alternative Build System</h3>

<p>An alternative, make file-based build and upload system is also available for the ADK 2012. This
system is command line based and intended for production environments where using an IDE environment
to load software onto accessory hardware may be inconvenient or undesirable.</p>

<p>To setup the environment:</p>
<ol>
  <li><a href="#src-download">Download</a> the ADK 2012 source code files.</li>
  <li>In a terminal window, navigate to <code>&lt;adk-source-download&gt;/adk2012/board/MakefileBasedBuild</code>.</li>
  <li>Execute the following command and follow the instructions:
    <pre>$> ./setup</pre>
  </li>
</ol>

<p>To build a program for your accessory:</p>
<ol>
  <li>Place your accessory code in the <code>MakefileBasedBuild/app</code> directory, including all
required library files. See the <code>app/main.c</code> file for an example of the program format.</li>
  <li>Execute the following command and follow the instructions:
    <pre>$> ./build</pre>
  </li>
</ol>

<p>To load the program on your accessory hardware:</p>
<ol>
  <li>Run the build process above and make sure your program compiled successfully.</li>
  <li>Attach the accessory via USB cable to your development computer.</li>
  <li>Check which port the accessory is attached to and modify the <code>UART</code> variable in the
<code>flash</code> script to the correct port address. On linux machines, the port address is typically
<code>/dev/ttyUSB0</code>.</li>
  <li>Execute the following command to load the program on the accessory:
  <pre>$> ./flash</pre></li>
</ol>

<h2 id="adk-conn">How the ADK Connects with Android Devices</h2>

<p>The essential feature of any Android accessory is its ability to connect and communicate with an
Android device. Creating a fast and reliable connection between your accessory and Android devices
is the first order of business when building software for an accessory. This section describes the
connection and communication essentials used in the ADK 2012 so that you can apply them to
developing your own Android accessories.</p>

<h3 id="adk-conn-bt">ADK Connection over Bluetooth</h3>

<p>The ADK 2012 app and hardware accessory use a Bluetooth Serial Port Profile (SPP) connection to
communicate. This connection allows two way communication between the ADK accessory and Android
devices.</p>

<p class="note"><strong>Note:</strong> The implementation of the ADK hardware allows the use of
other profiles and multiple connections. However, the basic communication between the ADK 2012
accessory and the Android application uses SPP.</p>

<h4 id="acc-bt-code">Accessory Bluetooth Code</h4>

<p>In order to enable Bluetooth communications, the <code>clock.ino</code> sketch for the ADK 2012
accessory calls a <code>btStart()</code> method during the <code>setup()</code> method to enable radio
frequency communications and start listening for Bluetooth connections:</p>

<pre>
ADK L;
void setup() {
 L.adkInit();
 L.btStart();
}
...
void btStart(){
    uint8_t i, dlci;
    int f;

    L.btEnable(adkBtConnectionRequest, adkBtLinkKeyRequest, adkBtLinkKeyCreated,
               adkBtPinRequest, NULL);

    dlci = L.btRfcommReserveDlci(RFCOMM_DLCI_NEED_EVEN);

    if(!dlci) dbgPrintf("BTADK: failed to allocate DLCI\n");
    else{

        //change descriptor to be valid...
        for(i = 0, f = -1; i &lt; sizeof(sdpDescrADK); i++){

            if(sdpDescrADK[i] == MAGIX){
                if(f == -1) f = i;
                else break;
            }
        }

        if(i != sizeof(sdpDescrADK) || f == -1){

            dbgPrintf("BTADK: failed to find a single marker in descriptor\n");
            L.btRfcommReleaseDlci(dlci);
            return;
        }

        sdpDescrADK[f] = dlci >> 1;

        dbgPrintf("BTADK has DLCI %u\n", dlci);

        L.btRfcommRegisterPort(dlci, btAdkPortOpen, btAdkPortClose, btAdkPortRx);
        L.btSdpServiceDescriptorAdd(sdpDescrADK, sizeof(sdpDescrADK));
    }
}
</pre>

<p>Notice that the <code>sdpDescrADK</code> object contains a Universally Unique Identifier (UUID) in the
variable <code>BT_ADK_UUID</code>. This identifier <em>must match</em> the device UUID provided in the
<code><a href="../../reference/android/bluetooth/BluetoothSocket.html">BluetoothSocket</a></code> connection request in the Android application code.</p>

<p>Once Bluetooth is enabled with the code shown above, the accessory listens for connection
requests. The ADK library handles listening and connection details, so the accessory calls
<code>ADK::adkEventProcess()</code> once during each loop execution:</p>

<pre>
void loop(void)
{
  ...
  L.adkEventProcess(); //let the adk framework do its thing
  ...
}
</pre>

<p>If a Bluetooth connection has been established, any commands are routed to the
<code>btAdkPortRx()</code> callback method (which was registered with the ADK library as part of the
<code>btStart()</code> method) and processed accordingly. The ADK accessory sends messages back through
the Bluetooth connection using the <code>ADK::btRfcommPortTx()</code> method.
For more details, review the implementations of these methods in the <code>clock.ino</code> sketch.</p>

<h4 id="app-bt-code">Android App Bluetooth Code</h4>

<p>In the ADK 2012 Android app, the code for handling Bluetooth connections is encapsulated in in a
<code>BTConnection</code> class. In this class, the application requests access to the Bluetooth adapter
and negotiates a connection with the ADK 2012 accessory. Here is a summary of the relevant code:</p>

<pre>
mAdapter = BluetoothAdapter.getDefaultAdapter();
BluetoothDevice device = mAdapter.getRemoteDevice(address);
mSocket = device.createInsecureRfcommSocketToServiceRecord(ADK_UUID);
mSocket.connect();
</pre>

<p>Note the <code>ADK_UUID</code> parameter in the second line. This identifier must match the identifier
output by the accessory (the <code>BT_ADK_UUID</code> variable mentioned earlier), otherwise the protocol
negotiation fails and the <code><a href="../../reference/android/bluetooth/BluetoothSocket.html">BluetoothSocket</a></code> is not created. Once a
connection is established, you obtain <code><a href="../../reference/java/io/InputStream.html">InputStream</a></code> and <code><a href="../../reference/java/io/OutputStream.html">OutputStream</a></code>
objects from the socket to communicate with the accessory:</p>

<pre>
mInStream = mSocket.getInputStream();
mOutStream = mSocket.getOutputStream();
</pre>

<p>Review the <code>BTConnection.java</code> file provided in the ADK 2012 software download for more
implementation details.</p>

<h3 id="adk-conn-usb">ADK Connection over USB</h3>

<p>The ADK 2012 app and hardware accessory can also use a USB connection to communicate, similar to
the original ADK.</p>

<h4 id="acc-usb-code">Accessory USB Code</h4>

<p>The ADK library takes care of most of the implementation details for a USB connection, the
accessory code must make a few calls to initialize USB connectivity, including setting the accessory
identification strings:</p>

<pre>
ADK L;
void setup() {
  L.adkInit();
  L.usbSetAccessoryStringVendor(...);
  L.usbSetAccessoryStringName(...);
  L.usbSetAccessoryStringLongname(...);
  L.usbSetAccessoryStringVersion(...);
  L.usbSetAccessoryStringUrl(...);
  L.usbSetAccessoryStringSerial(...);

  L.usbStart();
}
</pre>

<p class="note"><strong>Note:</strong> The identification strings must match the USB accessory
filter settings specified in the connecting Android application,otherwise the application cannot
connect with the accessory.</p>

<p>Once USB is enabled with code shown above, the accessory listens for connection requests. The ADK
library handles listening and connection details, so the accessory calls <code>ADK::adkEventProcess()</code> once during each loop execution:</p>

<pre>
void loop(void)
{
  ...
  L.adkEventProcess(); //let the adk framework do its thing
  ...
}
</pre>

<p>The accessory must then check for a live USB connection to process commands and send
messages. Here is a summary of the relevant code:</p>

<pre>
void loop() {
  if (L.accessoryConnected()) {
    int recvLen = L.accessoryReceive(msg, sizeof(msg));
    if (recvLen > 0) {
      ... // process message
    }

    L.accessorySend(outmsg, outmsgLen);
  }
  L.adkEventProcess();
}
</pre>

<p>For more details, review the implementations of these methods in the <code>clock.ino</code>
sketch.</p>

<h4 id="app-usb-code">Android App USB Code</h4>

<p>In the ADK 2012 Android app, the code for handling USB connections is encapsulated in a
<code>UsbConnection</code> class. This class sets up a <code><a href="../../reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a></code> to
listen for USB events and then attempts to connect when a matching connection event is received.
Here is a summary of the relevant code:</p>

<pre>
import com.android.future.usb.UsbAccessory;
import com.android.future.usb.UsbManager;

mUSBManager = UsbManager.getInstance(this);
UsbAccessory acc = mUSBManager.getAccessoryList()[0];

if (!mUSBManager.hasPermission(acc)) return;
</pre>

<p>The ADK 2012 app uses the support library to implement the USB accessory connections, in order to
support devices running Android 2.3.4 (API Level 10). If you only need to support Android
3.1 (API Level 12) and higher devices, you can replace the first 4 lines the following code:</p>

<pre>
import android.hardware.usb.UsbAccessory
import android.hardware.usb.UsbManager

mUSBManager = (UsbManager) getSystemService(Context.USB_SERVICE);
UsbAccessory acc = (UsbAccessory)
                   intent.getParcelableExtra(UsbManager.EXTRA_ACCESSORY);
</pre>

<p>Note that the app only receives events when the USB accessory identification information matches
the information in the <code>res/xml/usb_accessory_filter.xml</code> file, referenced by the
application’s manifest statement:</p>

<pre>
&lt;meta-data
    android:name="android.hardware.usb.action.USB_ACCESSORY_ATTACHED"
    android:resource="@xml/usb_accessory_filter" /&gt;
</pre>

<p>Connections from other USB devices are not received by the ADK 2012 accessory.</p>

<p>Once the connection is established, the app can communicate with the accessory through file input
and output streams, as shown in the following example code:</p>

<pre>
ParcelFileDescriptor mFD = mUSBManager.openAccessory(acc);
if (mFD != null) {
  FileDescripter fd = mFD.getFileDescriptor();
  mIS = new FileInputStream(fd);  // use this to receive messages
  mOS = new FileOutputStream(fd); // use this to send commands
}
</pre>

<p>Review the <code>UsbConnection.java</code> file provided in the ADK 2012 source code for more
implementation details.</p>

<h2 id="audio-dock">USB Audio Dock Implementation</h2>

<p>One of the important new features introduced with the ADK 2012 is the ability to play audio over
a USB connection. This innovation was introduced as an update to Android Open Accessory (AOA)
<a href="http://source.android.com/tech/accessories/aoap/aoa2.html">protocol 2.0</a> and is
available on devices running Android 4.1 (API Level 16) and higher.</p>

<p>The ADK 2012 provides a reference implementation of this functionality for accessory developers.
No software application is required to be installed on the connected Android device, accessory
developers only need to support AOA v2. This implementation demonstrates audio output of 16bit,
44.1kHz stereo PCM source data compressed into a single channel due to the audio hardware available
on the accessory.</p>

<p>Using the audio output features provided by the ADK library requires only a few function calls.
The first few calls are in the accessory <code>setup()</code> routine, which prepare the accessory for
USB connections and audio output, as summarized in the code example below:</p>

<pre>
ADK L;
void setup() {
  L.audioInit();
  L.usbh_init()
  L.usbStart();
}
</pre>

<p>For more information about the <code>ADK::audioInit()</code> function, see the <code>libraries/ADK/Audio.c</code> library file. For more information about the <code>ADK::usbh_init()</code>
function, see the <code>libraries/ADK/Usbh.c</code> library file.</p>

<p>After completing this setup, the <code>loop()</code> function calls <code>ADK::adkEventProcess()</code> to
handle audio output and other ADK functions:</p>

<pre>
void loop(void)
{
  ...
  L.adkEventProcess(); //let the adk framework do its thing
  ...
}
</pre>

<p>This call executes task queuing for the ADK and as part of the execution process, the task queue
executes <code>usbh_work()</code> in <code>libraries/ADK/Usbh.c</code>, which handles audio output requests.
Review the implementation of this function for details. For additional implementation details on
audio output, see the <code>libraries/ADK/accessory.c</code> library file.</p>

    </div>

    

  </div> <!-- end jd-content -->

<div class="wrap">
  <div class="dac-footer">
    <div class="cols dac-footer-main">
      <div class="col-1of2">
        <a class="dac-footer-getnews" data-modal-toggle="newsletter" href="javascript:;">Get news &amp; tips <span
          class="dac-fab dac-primary"><i class="dac-sprite dac-mail"></i></span></a>
      </div>
      <div class="col-1of2 dac-footer-reachout">
        <div class="dac-footer-contact">
          <a class="dac-footer-contact-link" href="http://android-developers.blogspot.com/">Blog</a>
          <a class="dac-footer-contact-link" href="/support.html">Support</a>
        </div>
        <div class="dac-footer-social">
          <a class="dac-fab dac-footer-social-link" href="https://www.youtube.com/user/androiddevelopers"><i class="dac-sprite dac-youtube"></i></a>
          <a class="dac-fab dac-footer-social-link" href="https://plus.google.com/+AndroidDevelopers"><i class="dac-sprite dac-gplus"></i></a>
          <a class="dac-fab dac-footer-social-link" href="https://twitter.com/AndroidDev"><i class="dac-sprite dac-twitter"></i></a>
        </div>
      </div>
    </div>

    <hr class="dac-footer-separator"/>

    
      <p class="dac-footer-copyright">
        
  Except as noted, this content is
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and
  restrictions, see the <a href="../../license.html">Content
  License</a>.
      </p>
    

    <p class="dac-footer-links">
      <a href="/about/index.html">About Android</a>
      <a href="/auto/index.html">Auto</a>
      <a href="/tv/index.html">TV</a>
      <a href="/wear/index.html">Wear</a>
      <a href="/legal.html">Legal</a>

      <span id="language" class="locales">
        <select name="language" onchange="changeLangPref(this.value, true)">
          <option value="en" selected="selected">English</option>
          <option value="es">Español</option>
          <option value="ja">日本語</option>
          <option value="ko">한국어</option>
          <option value="pt-br">Português Brasileiro</option>
          <option value="ru">Русский</option>
          <option value="zh-cn">中文（简体)</option>
          <option value="zh-tw">中文（繁體)</option>
        </select>
      </span>
    </p>
  </div>
</div> <!-- end footer -->

<div data-modal="newsletter" data-newsletter data-swap class="dac-modal newsletter">
  <div class="dac-modal-container">
    <div class="dac-modal-window">
      <header class="dac-modal-header">
        <button class="dac-modal-header-close" data-modal-toggle><i class="dac-sprite dac-close"></i></button>
        <div class="dac-swap" data-swap-container>
          <section class="dac-swap-section dac-active dac-down">
            <h2 class="norule dac-modal-header-title">Get the latest Android developer news and tips that will help you find success on Google Play.</h2>
            <p class="dac-modal-header-subtitle">&#42; Required Fields</p>
          </section>
          <section class="dac-swap-section dac-up">
            <h2 class="norule dac-modal-header-title">Hooray!</h2>
          </section>
        </div>
      </header>
      <div class="dac-swap" data-swap-container>
        <section class="dac-swap-section dac-active dac-left">
          <form action="https://docs.google.com/forms/d/1QgnkzbEJIDu9lMEea0mxqWrXUJu0oBCLD7ar23V0Yys/formResponse" class="dac-form" method="post" target="dac-newsletter-iframe">
            <section class="dac-modal-content">
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-full-name" class="dac-form-floatlabel">Full name</label>
                      <input type="text" class="dac-form-input" name="entry.1357890476" id="newsletter-full-name" required>
                      <span class="dac-form-required">*</span>
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-email" class="dac-form-floatlabel">Email address</label>
                      <input type="email" class="dac-form-input" name="entry.472100832" id="newsletter-email" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol">
                    <div class="dac-form-input-group">
                      <label for="newsletter-company" class="dac-form-floatlabel">Company / developer name</label>
                      <input type="text" class="dac-form-input" name="entry.1664780309" id="newsletter-company">
                    </div>
                    <div class="dac-form-input-group">
                      <label for="newsletter-play-store" class="dac-form-floatlabel">One of your Play Store app URLs</label>
                      <input type="url" class="dac-form-input" name="entry.47013838" id="newsletter-play-store" required>
                      <span class="dac-form-required">*</span>
                    </div>
                  </div>
                </div>
              </fieldset>
              <fieldset class="dac-form-fieldset">
                <div class="cols">
                  <div class="col-1of2 newsletter-leftCol">
                    <legend class="dac-form-legend">Which best describes your business:<span class="dac-form-required">*</span>
                    </legend>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-app" required>
                      <label for="newsletter-business-type-app" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-app" class="dac-form-label">Apps</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-games" required>
                      <label for="newsletter-business-type-games" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-games" class="dac-form-label">Games</label>
                    </div>
                    <div class="dac-form-radio-group">
                      <input type="radio" value="Apps and Games" class="dac-form-radio" name="entry.1796324055" id="newsletter-business-type-appsgames" required>
                      <label for="newsletter-business-type-appsgames" class="dac-form-radio-button"></label>
                      <label for="newsletter-business-type-appsgames" class="dac-form-label">Apps &amp; Games</label>
                    </div>
                  </div>
                  <div class="col-1of2 newsletter-rightCol newsletter-checkboxes">
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.732309842" id="newsletter-add" required value="Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.">
                          <label for="newsletter-add" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-add" class="dac-form-label dac-form-aside">Add me to the mailing list for the monthly newsletter and occasional emails about development and Google Play opportunities.<span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                    <div class="dac-form-radio-group">
                      <div class="dac-media">
                        <div class="dac-media-figure">
                          <input type="checkbox" class="dac-form-checkbox" name="entry.2045036090" id="newsletter-terms" required value="I acknowledge that the information provided in this form will be subject to Google's privacy policy (https://www.google.com/policies/privacy/).">
                          <label for="newsletter-terms" class="dac-form-checkbox-button"></label>
                        </div>
                        <div class="dac-media-body">
                          <label for="newsletter-terms" class="dac-form-label dac-form-aside">I acknowledge that the information provided in this form will be subject to <a href="https://www.google.com/policies/privacy/">Google's privacy policy</a>.<span class="dac-form-required">*</span></label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </fieldset>
            </section>
            <footer class="dac-modal-footer">
              <div class="cols">
                <div class="col-2of5">
                </div>
              </div>
              <button type="submit" value="Submit" class="dac-fab dac-primary dac-large dac-modal-action"><i class="dac-sprite dac-arrow-right"></i></button>
            </footer>
          </form>
        </section>
        <section class="dac-swap-section dac-right">
          <div class="dac-modal-content">
            <p class="newsletter-success-message">
              You have successfully signed up for the latest Android developer news and tips.
            </p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div> <!-- end footer -->

</div><!-- end doc-content -->

</div> <!-- end .cols --> 
</div> <!-- end body-content --> 





  <script src="https://developer.android.com/ytblogger_lists_unified.js" type="text/javascript"></script>
  <script src="../../jd_lists_unified.js?v=15" type="text/javascript"></script>
  <script src="../../jd_extras.js?v=15" type="text/javascript"></script>
  <script src="../../jd_collections.js?v=15" type="text/javascript"></script>
  <script src="../../jd_tag_helpers.js?v=15" type="text/javascript"></script>

</body>
</html>
